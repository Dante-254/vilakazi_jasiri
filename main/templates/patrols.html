{% extends "index.html" %} {% block title %} Patrols {% endblock %} {% load
static %} {% block content %}
<!-- Patrols Start -->
<div class="container-fluid py-6">
  <div class="container">
    <div
      class="text-center mx-auto mb-5 wow fadeInUp"
      data-wow-delay="0.1s"
      style="max-width: 500px"
    >
      <h6 class="text-primary text-uppercase mb-2">Structure</h6>
      <h1 class="display-6 mb-4">Our Patrols</h1>
      <p>
        The Villakazi Rover Crew is organized into patrols, each with its own
        members and council.
      </p>
    </div>
    {% if user.is_staff %}
    <div class="text-end mb-3">
      <a href="{% url 'create_patrol' %}" class="btn btn-success">Add Patrol</a>
    </div>
    {% endif %} {% if patrols %}
    <div class="row g-4">
      {% for patrol in patrols %}
      <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
        <div class="team-item position-relative bg-light text-center p-4 h-100">
          <div class="mb-4">
            <h3 class="text-primary">{{ patrol.name }}</h3>
          </div>
          {% if patrol.description %}
          <p class="mb-4">{{ patrol.description|truncatewords:15 }}</p>
          {% endif %}
          <div class="mb-3">
            <span class="badge bg-primary"
              >{{ patrol.members.count }} Members</span
            >
          </div>
          <a
            href="{% url 'patrol_detail' patrol.name %}"
            class="btn btn-outline-primary"
            >View Patrol</a
          >
          {% if user.is_staff %}
          <a
            href="{% url 'edit_patrol' patrol.id %}"
            class="btn btn-sm btn-primary ms-2"
            >Edit</a
          >
          <a
            href="{% url 'delete_patrol' patrol.id %}"
            class="btn btn-sm btn-danger ms-2"
            >Delete</a
          >
          {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-5">
      <p class="text-muted">No patrols available yet.</p>
    </div>
    {% endif %}
  </div>
</div>
<!-- Patrols End -->
{% endblock %}
